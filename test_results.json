[
  {
    "test": "Authentication",
    "success": true,
    "details": "Successfully authenticated as testadmin",
    "timestamp": "2026-01-28T12:17:56.664378",
    "response_data": null
  },
  {
    "test": "Get Returnable Invoices",
    "success": true,
    "details": "Retrieved 3 returnable invoices",
    "timestamp": "2026-01-28T12:17:57.081228",
    "response_data": {
      "count": 3,
      "sample": [
        {
          "id": "cdf415bc-4518-47be-aa40-1cfbe0f46a0a",
          "invoice_no": "INV-2026-0004",
          "date": "2026-01-28T06:58:08.780000",
          "party_name": "Test Customer",
          "total_amount": 1055.25,
          "balance_amount": 555.25,
          "items": [
            {
              "id": "35cb5500-2dac-44ad-a5b1-9247464d8d44",
              "category": "Test Gold Ring 22K",
              "description": "Test Ring Job Card Item",
              "qty": 2,
              "gross_weight": 0.0,
              "stone_weight": 0.0,
              "net_gold_weight": 0.0,
              "weight": 20.0,
              "purity": 916,
              "metal_rate": 50.0,
              "gold_value": 1000.0,
              "making_charge_type": null,
              "making_value": 5.0,
              "stone_charges": 0.0,
              "wastage_charges": 0.0,
              "item_discount": 0.0,
              "vat_percent": 5.0,
              "vat_amount": 50.25,
              "line_total": 1055.25
            }
          ]
        },
        {
          "id": "1733fa2e-191b-4e5c-970b-73d801320bf3",
          "invoice_no": "INV-2026-0002",
          "date": "2026-01-28T00:03:27.751000",
          "party_name": "Perf Test Party 3 20260125073347",
          "total_amount": 418.394,
          "balance_amount": 0.0,
          "items": [
            {
              "id": "5ba566a8-ea4c-48db-818a-39c911e3dea6",
              "category": "Chain",
              "description": "",
              "qty": 1,
              "gross_weight": 0.0,
              "stone_weight": 0.0,
              "net_gold_weight": 0.0,
              "weight": 20.0,
              "purity": 916,
              "metal_rate": 20.0,
              "gold_value": 400.0,
              "making_charge_type": null,
              "making_value": 0.47,
              "stone_charges": 0.0,
              "wastage_charges": 0.0,
              "item_discount": 0.0,
              "vat_percent": 5.0,
              "vat_amount": 19.924,
              "line_total": 420.394
            }
          ]
        }
      ]
    }
  },
  {
    "test": "Get Test Customer",
    "success": true,
    "details": "Using existing customer: Perf Test Party 1 20260125073346",
    "timestamp": "2026-01-28T12:17:57.704609",
    "response_data": null
  },
  {
    "test": "Create Test Invoice for Returns",
    "success": true,
    "details": "Created and finalized test invoice: INV-2026-0007",
    "timestamp": "2026-01-28T12:17:59.810889",
    "response_data": {
      "invoice_id": "f14af47a-2413-4cf2-9880-b2e57d57eb5e",
      "invoice_number": "INV-2026-0007"
    }
  },
  {
    "test": "Get Returnable Items",
    "success": true,
    "details": "Retrieved 1 returnable items from invoice",
    "timestamp": "2026-01-28T12:18:00.432172",
    "response_data": {
      "items_count": 1,
      "sample": [
        {
          "item_id": "fef234b2-aeec-469d-ab7e-7403b8689498",
          "description": "Gold Ring 22K",
          "purity": 916,
          "category": null,
          "original_qty": 1,
          "original_weight_grams": 5.15,
          "original_amount": 1207.85,
          "returned_qty": 0,
          "returned_weight_grams": 0.0,
          "remaining_qty": 1,
          "remaining_weight_grams": 5.15,
          "remaining_amount": 1207.85
        }
      ]
    }
  },
  {
    "test": "Create Draft Return",
    "success": false,
    "details": "Failed: 520 - {\"detail\":\"Error creating return draft: 1 validation error for Return\\nparty_name\\n  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]\\n    For further information visit https://errors.pydantic.dev/2.12/v/string_type\"}",
    "timestamp": "2026-01-28T12:18:01.260897",
    "response_data": null
  },
  {
    "test": "Get Test Vendor",
    "success": true,
    "details": "Using existing vendor: Axe",
    "timestamp": "2026-01-28T12:18:01.884531",
    "response_data": null
  },
  {
    "test": "Create Draft Purchase",
    "success": true,
    "details": "Created draft purchase (Status: Draft, Balance: 18642.75 OMR)",
    "timestamp": "2026-01-28T12:18:03.938062",
    "response_data": {
      "purchase_id": "22998173-073f-40b0-a113-2c86eda165ee",
      "status": "Draft",
      "balance_due": 18642.75
    }
  },
  {
    "test": "Get Test Account",
    "success": true,
    "details": "Using existing account: Test Cash Account 1769567374",
    "timestamp": "2026-01-28T12:18:04.356959",
    "response_data": null
  },
  {
    "test": "Add Payment to Purchase",
    "success": true,
    "details": "Payment added successfully (Status: None, Paid: None OMR, Balance: None OMR, Locked: False)",
    "timestamp": "2026-01-28T12:18:06.408333",
    "response_data": {
      "status": null,
      "paid_amount": null,
      "balance_due": null,
      "locked": false
    }
  },
  {
    "test": "Get Test Customer",
    "success": true,
    "details": "Using existing customer: Perf Test Party 1 20260125073346",
    "timestamp": "2026-01-28T12:18:07.029755",
    "response_data": null
  },
  {
    "test": "Invoice Stock Movements",
    "success": true,
    "details": "Stock OUT movement created: Invoice INV-2026-0008 - Finalized (Qty: -1.0, Weight: -4.45g)",
    "timestamp": "2026-01-28T12:18:09.712886",
    "response_data": {
      "movement_type": "Stock OUT",
      "qty_delta": -1.0,
      "weight_delta": -4.45
    }
  },
  {
    "test": "Finance Dashboard",
    "success": true,
    "details": "Dashboard structure valid (Categories: 13, Outstanding: 16115.37 OMR, Customers: 127)",
    "timestamp": "2026-01-28T12:18:12.796916",
    "response_data": {
      "inventory": {
        "total_categories": 13,
        "total_stock_weight_grams": 2784.5,
        "total_stock_qty": 108.0,
        "low_stock_items": 9
      },
      "financial": {
        "total_outstanding_omr": 16115.37,
        "outstanding_invoices_count": 6
      },
      "parties": {
        "total_customers": 127,
        "total_vendors": 23,
        "total": 150
      },
      "job_cards": {
        "total": 6,
        "pending": 0,
        "completed": 0
      },
      "recent_activity": {
        "recent_invoices": [
          {
            "id": "7405dfa6-e5b1-4fc3-b70f-1243da9b3255",
            "invoice_number": "INV-2026-0008",
            "date": "2026-01-28T12:18:07.441000",
            "created_at": "2026-01-28T12:18:07.441000",
            "due_date": null,
            "customer_type": "saved",
            "customer_id": "a8b552ab-efa7-4f5b-a1ae-95064962d367",
            "customer_name": null,
            "customer_phone": null,
            "customer_address": null,
            "customer_gstin": null,
            "walk_in_name": null,
            "walk_in_phone": null,
            "worker_id": null,
            "worker_name": null,
            "invoice_type": "sale",
            "payment_status": "unpaid",
            "status": "finalized",
            "finalized_at": "2026-01-28T12:18:08.272000",
            "finalized_by": "336cdc1b-081b-44ff-86a3-c953c630585a",
            "paid_at": null,
            "items": [
              {
                "id": "ef8c30f5-13f8-45f7-9839-816700815fab",
                "category": "Rings",
                "description": "Gold Ring 18K - Stock Test",
                "qty": 1,
                "gross_weight": 4.5,
                "stone_weight": 0.05,
                "net_gold_weight": 4.45,
                "weight": 4.45,
                "purity": 750,
                "metal_rate": 165.0,
                "gold_value": 734.25,
                "making_charge_type": "flat",
                "making_value": 100.0,
                "stone_charges": 15.0,
                "wastage_charges": 10.0,
                "item_discount": 0.0,
                "vat_percent": 5.0,
                "vat_amount": 42.96,
                "line_total": 902.21
              }
            ],
            "subtotal": 859.25,
            "discount_amount": 0.0,
            "tax_type": "cgst_sgst",
            "gst_percent": 5.0,
            "cgst_total": 21.48,
            "sgst_total": 21.48,
            "igst_total": 0.0,
            "vat_total": 42.96,
            "grand_total": 902.21,
            "paid_amount": 0.0,
            "balance_due": 902.21,
            "notes": "Test invoice for stock movement verification",
            "jobcard_id": null,
            "created_by": "336cdc1b-081b-44ff-86a3-c953c630585a",
            "is_deleted": false
          },
          {
            "id": "f14af47a-2413-4cf2-9880-b2e57d57eb5e",
            "invoice_number": "INV-2026-0007",
            "date": "2026-01-28T12:17:58.121000",
            "created_at": "2026-01-28T12:17:58.121000",
            "due_date": null,
            "customer_type": "saved",
            "customer_id": "a8b552ab-efa7-4f5b-a1ae-95064962d367",
            "customer_name": null,
            "customer_phone": null,
            "customer_address": null,
            "customer_gstin": null,
            "walk_in_name": null,
            "walk_in_phone": null,
            "worker_id": null,
            "worker_name": null,
            "invoice_type": "sale",
            "payment_status": "unpaid",
            "status": "finalized",
            "finalized_at": "2026-01-28T12:17:58.947000",
            "finalized_by": "336cdc1b-081b-44ff-86a3-c953c630585a",
            "paid_at": null,
            "items": [
              {
                "id": "fef234b2-aeec-469d-ab7e-7403b8689498",
                "category": null,
                "description": "Gold Ring 22K",
                "qty": 1,
                "gross_weight": 5.25,
                "stone_weight": 0.1,
                "net_gold_weight": 5.15,
                "weight": 5.15,
                "purity": 916,
                "metal_rate": 185.5,
                "gold_value": 955.33,
                "making_charge_type": "per_gram",
                "making_value": 150.0,
                "stone_charges": 25.0,
                "wastage_charges": 20.0,
                "item_discount": 0.0,
                "vat_percent": 5.0,
                "vat_amount": 57.52,
                "line_total": 1207.85
              }
            ],
            "subtotal": 1150.33,
            "discount_amount": 0.0,
            "tax_type": "cgst_sgst",
            "gst_percent": 5.0,
            "cgst_total": 28.76,
            "sgst_total": 28.76,
            "igst_total": 0.0,
            "vat_total": 57.52,
            "grand_total": 1207.85,
            "paid_amount": 0.0,
            "balance_due": 1207.85,
            "notes": "Test invoice for returns testing",
            "jobcard_id": null,
            "created_by": "336cdc1b-081b-44ff-86a3-c953c630585a",
            "is_deleted": false
          },
          {
            "id": "f72da5c7-3ee3-49f1-bcec-6fe10b609c83",
            "invoice_number": "INV-2026-0006",
            "date": "2026-01-28T12:15:43.443000",
            "created_at": "2026-01-28T12:15:43.443000",
            "due_date": null,
            "customer_type": "saved",
            "customer_id": "a8b552ab-efa7-4f5b-a1ae-95064962d367",
            "customer_name": null,
            "customer_phone": null,
            "customer_address": null,
            "customer_gstin": null,
            "walk_in_name": null,
            "walk_in_phone": null,
            "worker_id": null,
            "worker_name": null,
            "invoice_type": "sale",
            "payment_status": "unpaid",
            "status": "draft",
            "finalized_at": null,
            "finalized_by": null,
            "paid_at": null,
            "items": [
              {
                "id": "bbfa4220-1937-430e-a6c7-71033b51b436",
                "category": "Rings",
                "description": "Gold Ring 18K - Stock Test",
                "qty": 1,
                "gross_weight": 4.5,
                "stone_weight": 0.05,
                "net_gold_weight": 4.45,
                "weight": 4.45,
                "purity": 750,
                "metal_rate": 165.0,
                "gold_value": 734.25,
                "making_charge_type": "flat",
                "making_value": 100.0,
                "stone_charges": 15.0,
                "wastage_charges": 10.0,
                "item_discount": 0.0,
                "vat_percent": 5.0,
                "vat_amount": 42.96,
                "line_total": 902.21
              }
            ],
            "subtotal": 859.25,
            "discount_amount": 0.0,
            "tax_type": "cgst_sgst",
            "gst_percent": 5.0,
            "cgst_total": 21.48,
            "sgst_total": 21.48,
            "igst_total": 0.0,
            "vat_total": 42.96,
            "grand_total": 902.21,
            "paid_amount": 0.0,
            "balance_due": 902.21,
            "notes": "Test invoice for stock movement verification",
            "jobcard_id": null,
            "created_by": "336cdc1b-081b-44ff-86a3-c953c630585a",
            "is_deleted": false
          },
          {
            "id": "6b9f9e0a-6f9f-49b6-a0ce-d53e2f242732",
            "invoice_number": "INV-2026-0005",
            "date": "2026-01-28T12:15:36.693000",
            "created_at": "2026-01-28T12:15:36.693000",
            "due_date": null,
            "customer_type": "saved",
            "customer_id": "a8b552ab-efa7-4f5b-a1ae-95064962d367",
            "customer_name": null,
            "customer_phone": null,
            "customer_address": null,
            "customer_gstin": null,
            "walk_in_name": null,
            "walk_in_phone": null,
            "worker_id": null,
            "worker_name": null,
            "invoice_type": "sale",
            "payment_status": "unpaid",
            "status": "draft",
            "finalized_at": null,
            "finalized_by": null,
            "paid_at": null,
            "items": [
              {
                "id": "dfd79b15-daf4-4330-bdc4-b05a88fd663d",
                "category": null,
                "description": "Gold Ring 22K",
                "qty": 1,
                "gross_weight": 5.25,
                "stone_weight": 0.1,
                "net_gold_weight": 5.15,
                "weight": 5.15,
                "purity": 916,
                "metal_rate": 185.5,
                "gold_value": 955.33,
                "making_charge_type": "per_gram",
                "making_value": 150.0,
                "stone_charges": 25.0,
                "wastage_charges": 20.0,
                "item_discount": 0.0,
                "vat_percent": 5.0,
                "vat_amount": 57.52,
                "line_total": 1207.85
              }
            ],
            "subtotal": 1150.33,
            "discount_amount": 0.0,
            "tax_type": "cgst_sgst",
            "gst_percent": 5.0,
            "cgst_total": 28.76,
            "sgst_total": 28.76,
            "igst_total": 0.0,
            "vat_total": 57.52,
            "grand_total": 1207.85,
            "paid_amount": 0.0,
            "balance_due": 1207.85,
            "notes": "Test invoice for returns testing",
            "jobcard_id": null,
            "created_by": "336cdc1b-081b-44ff-86a3-c953c630585a",
            "is_deleted": false
          },
          {
            "id": "cdf415bc-4518-47be-aa40-1cfbe0f46a0a",
            "invoice_number": "INV-2026-0004",
            "date": "2026-01-28T06:58:08.780000",
            "created_at": "2026-01-28T06:58:08.780000",
            "due_date": null,
            "customer_type": "saved",
            "customer_id": "4b5a48af-9a3c-4466-9791-d3828a086c87",
            "customer_name": "Test Customer",
            "customer_phone": null,
            "customer_address": null,
            "customer_gstin": null,
            "walk_in_name": null,
            "walk_in_phone": null,
            "worker_id": "d8e524d9-20a0-44fb-9301-7da327e1cd9f",
            "worker_name": "sarang",
            "invoice_type": "service",
            "payment_status": "partial",
            "status": "finalized",
            "finalized_at": "2026-01-28T06:59:20.167000",
            "finalized_by": "6670739a-ce7e-4fc0-affc-91a4c60017f1",
            "paid_at": null,
            "items": [
              {
                "id": "35cb5500-2dac-44ad-a5b1-9247464d8d44",
                "category": "Test Gold Ring 22K",
                "description": "Test Ring Job Card Item",
                "qty": 2,
                "gross_weight": 0.0,
                "stone_weight": 0.0,
                "net_gold_weight": 0.0,
                "weight": 20.0,
                "purity": 916,
                "metal_rate": 50.0,
                "gold_value": 1000.0,
                "making_charge_type": null,
                "making_value": 5.0,
                "stone_charges": 0.0,
                "wastage_charges": 0.0,
                "item_discount": 0.0,
                "vat_percent": 5.0,
                "vat_amount": 50.25,
                "line_total": 1055.25
              }
            ],
            "subtotal": 1005.0,
            "discount_amount": 0.0,
            "tax_type": "cgst_sgst",
            "gst_percent": 5.0,
            "cgst_total": 0.0,
            "sgst_total": 0.0,
            "igst_total": 0.0,
            "vat_total": 50.25,
            "grand_total": 1055.25,
            "paid_amount": 350.0,
            "balance_due": 555.25,
            "notes": null,
            "jobcard_id": "c58e6999-4644-45da-8e84-8b619ef876c5",
            "created_by": "6670739a-ce7e-4fc0-affc-91a4c60017f1",
            "is_deleted": false,
            "adjustment_history": [
              {
                "adjusted_by_return_id": "5884c382-8cf4-4087-9782-ba7b66352006",
                "adjusted_at": "2026-01-28T11:56:32.614000",
                "adjusted_by_user": "6670739a-ce7e-4fc0-affc-91a4c60017f1",
                "refund_amount": 150.0
              }
            ],
            "updated_at": "2026-01-28T11:56:32.614000"
          }
        ]
      },
      "timestamp": "2026-01-28T12:18:12.793607+00:00"
    }
  }
]