[
  {
    "test": "Authentication",
    "success": true,
    "details": "Successfully authenticated as testadmin",
    "timestamp": "2026-01-28T12:34:24.891821",
    "response_data": null
  },
  {
    "test": "Get Returnable Invoices",
    "success": true,
    "details": "Retrieved 5 returnable invoices",
    "timestamp": "2026-01-28T12:34:25.441400",
    "response_data": {
      "count": 5,
      "sample": [
        {
          "id": "7405dfa6-e5b1-4fc3-b70f-1243da9b3255",
          "invoice_no": "INV-2026-0008",
          "date": "2026-01-28T12:18:07.441000",
          "party_name": "Unknown",
          "total_amount": 902.21,
          "balance_amount": 902.21,
          "items": [
            {
              "id": "ef8c30f5-13f8-45f7-9839-816700815fab",
              "category": "Rings",
              "description": "Gold Ring 18K - Stock Test",
              "qty": 1,
              "gross_weight": 4.5,
              "stone_weight": 0.05,
              "net_gold_weight": 4.45,
              "weight": 4.45,
              "purity": 750,
              "metal_rate": 165.0,
              "gold_value": 734.25,
              "making_charge_type": "flat",
              "making_value": 100.0,
              "stone_charges": 15.0,
              "wastage_charges": 10.0,
              "item_discount": 0.0,
              "vat_percent": 5.0,
              "vat_amount": 42.96,
              "line_total": 902.21
            }
          ]
        },
        {
          "id": "f14af47a-2413-4cf2-9880-b2e57d57eb5e",
          "invoice_no": "INV-2026-0007",
          "date": "2026-01-28T12:17:58.121000",
          "party_name": "Unknown",
          "total_amount": 1207.85,
          "balance_amount": 1207.85,
          "items": [
            {
              "id": "fef234b2-aeec-469d-ab7e-7403b8689498",
              "category": null,
              "description": "Gold Ring 22K",
              "qty": 1,
              "gross_weight": 5.25,
              "stone_weight": 0.1,
              "net_gold_weight": 5.15,
              "weight": 5.15,
              "purity": 916,
              "metal_rate": 185.5,
              "gold_value": 955.33,
              "making_charge_type": "per_gram",
              "making_value": 150.0,
              "stone_charges": 25.0,
              "wastage_charges": 20.0,
              "item_discount": 0.0,
              "vat_percent": 5.0,
              "vat_amount": 57.52,
              "line_total": 1207.85
            }
          ]
        }
      ]
    }
  },
  {
    "test": "Get Test Customer",
    "success": true,
    "details": "Using existing customer: Perf Test Party 1 20260125073346",
    "timestamp": "2026-01-28T12:34:26.209587",
    "response_data": null
  },
  {
    "test": "Create Test Invoice for Returns",
    "success": true,
    "details": "Created and finalized test invoice: INV-2026-0009",
    "timestamp": "2026-01-28T12:34:28.106889",
    "response_data": {
      "invoice_id": "bd19e7aa-e9a9-49d6-9e18-1a82d043d79c",
      "invoice_number": "INV-2026-0009"
    }
  },
  {
    "test": "Get Returnable Items",
    "success": true,
    "details": "Retrieved 1 returnable items from invoice",
    "timestamp": "2026-01-28T12:34:28.765905",
    "response_data": {
      "items_count": 1,
      "sample": [
        {
          "item_id": "1c174023-7677-4298-b6cc-f91066c5eebc",
          "description": "Gold Ring 22K",
          "purity": 916,
          "category": null,
          "original_qty": 1,
          "original_weight_grams": 5.15,
          "original_amount": 1207.85,
          "returned_qty": 0,
          "returned_weight_grams": 0.0,
          "remaining_qty": 1,
          "remaining_weight_grams": 5.15,
          "remaining_amount": 1207.85
        }
      ]
    }
  },
  {
    "test": "Create Draft Return",
    "success": false,
    "details": "Failed: 520 - {\"detail\":\"Error creating return draft: 1 validation error for Return\\nparty_name\\n  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]\\n    For further information visit https://errors.pydantic.dev/2.12/v/string_type\"}",
    "timestamp": "2026-01-28T12:34:30.643918",
    "response_data": null
  },
  {
    "test": "Get Test Vendor",
    "success": true,
    "details": "Using existing vendor: Axe",
    "timestamp": "2026-01-28T12:34:31.305224",
    "response_data": null
  },
  {
    "test": "Create Draft Purchase",
    "success": true,
    "details": "Created draft purchase (Status: Draft, Balance: 18642.75 OMR)",
    "timestamp": "2026-01-28T12:34:32.779449",
    "response_data": {
      "purchase_id": "aa59326f-a71a-4d40-b0b1-beae2677d8b7",
      "status": "Draft",
      "balance_due": 18642.75
    }
  },
  {
    "test": "Get Test Account",
    "success": true,
    "details": "Using existing account: Test Cash Account 1769567374",
    "timestamp": "2026-01-28T12:34:33.328429",
    "response_data": null
  },
  {
    "test": "Add Payment to Purchase",
    "success": true,
    "details": "Payment added successfully (Status: None, Paid: None OMR, Balance: None OMR, Locked: False)",
    "timestamp": "2026-01-28T12:34:34.805099",
    "response_data": {
      "status": null,
      "paid_amount": null,
      "balance_due": null,
      "locked": false
    }
  },
  {
    "test": "Get Test Customer",
    "success": true,
    "details": "Using existing customer: Perf Test Party 1 20260125073346",
    "timestamp": "2026-01-28T12:34:35.571411",
    "response_data": null
  },
  {
    "test": "Invoice Stock Movements",
    "success": true,
    "details": "Stock OUT movement created: Invoice INV-2026-0010 - Finalized (Qty: -1.0, Weight: -4.45g)",
    "timestamp": "2026-01-28T12:34:38.016349",
    "response_data": {
      "movement_type": "Stock OUT",
      "qty_delta": -1.0,
      "weight_delta": -4.45
    }
  },
  {
    "test": "Finance Dashboard",
    "success": true,
    "details": "Dashboard structure valid (Categories: 13, Outstanding: 18225.43 OMR, Customers: 127)",
    "timestamp": "2026-01-28T12:34:39.461607",
    "response_data": {
      "inventory": {
        "total_categories": 13,
        "total_stock_weight_grams": 2885.0,
        "total_stock_qty": 109.0,
        "low_stock_items": 9
      },
      "financial": {
        "total_outstanding_omr": 18225.43,
        "outstanding_invoices_count": 8
      },
      "parties": {
        "total_customers": 127,
        "total_vendors": 23,
        "total": 150
      },
      "job_cards": {
        "total": 6,
        "pending": 0,
        "completed": 0
      },
      "recent_activity": {
        "recent_invoices": [
          {
            "id": "30713144-7c62-4c2c-9127-0445c6b80263",
            "invoice_number": "INV-2026-0010",
            "date": "2026-01-28T12:34:35.905000",
            "created_at": "2026-01-28T12:34:35.905000",
            "due_date": null,
            "customer_type": "saved",
            "customer_id": "a8b552ab-efa7-4f5b-a1ae-95064962d367",
            "customer_name": null,
            "customer_phone": null,
            "customer_address": null,
            "customer_gstin": null,
            "walk_in_name": null,
            "walk_in_phone": null,
            "worker_id": null,
            "worker_name": null,
            "invoice_type": "sale",
            "payment_status": "unpaid",
            "status": "finalized",
            "finalized_at": "2026-01-28T12:34:36.683000",
            "finalized_by": "336cdc1b-081b-44ff-86a3-c953c630585a",
            "paid_at": null,
            "items": [
              {
                "id": "82a3c903-6c0f-4d88-9caf-8e46089ddaac",
                "category": "Rings",
                "description": "Gold Ring 18K - Stock Test",
                "qty": 1,
                "gross_weight": 4.5,
                "stone_weight": 0.05,
                "net_gold_weight": 4.45,
                "weight": 4.45,
                "purity": 750,
                "metal_rate": 165.0,
                "gold_value": 734.25,
                "making_charge_type": "flat",
                "making_value": 100.0,
                "stone_charges": 15.0,
                "wastage_charges": 10.0,
                "item_discount": 0.0,
                "vat_percent": 5.0,
                "vat_amount": 42.96,
                "line_total": 902.21
              }
            ],
            "subtotal": 859.25,
            "discount_amount": 0.0,
            "tax_type": "cgst_sgst",
            "gst_percent": 5.0,
            "cgst_total": 21.48,
            "sgst_total": 21.48,
            "igst_total": 0.0,
            "vat_total": 42.96,
            "grand_total": 902.21,
            "paid_amount": 0.0,
            "balance_due": 902.21,
            "notes": "Test invoice for stock movement verification",
            "jobcard_id": null,
            "created_by": "336cdc1b-081b-44ff-86a3-c953c630585a",
            "is_deleted": false
          },
          {
            "id": "bd19e7aa-e9a9-49d6-9e18-1a82d043d79c",
            "invoice_number": "INV-2026-0009",
            "date": "2026-01-28T12:34:26.544000",
            "created_at": "2026-01-28T12:34:26.544000",
            "due_date": null,
            "customer_type": "saved",
            "customer_id": "a8b552ab-efa7-4f5b-a1ae-95064962d367",
            "customer_name": null,
            "customer_phone": null,
            "customer_address": null,
            "customer_gstin": null,
            "walk_in_name": null,
            "walk_in_phone": null,
            "worker_id": null,
            "worker_name": null,
            "invoice_type": "sale",
            "payment_status": "unpaid",
            "status": "finalized",
            "finalized_at": "2026-01-28T12:34:27.433000",
            "finalized_by": "336cdc1b-081b-44ff-86a3-c953c630585a",
            "paid_at": null,
            "items": [
              {
                "id": "1c174023-7677-4298-b6cc-f91066c5eebc",
                "category": null,
                "description": "Gold Ring 22K",
                "qty": 1,
                "gross_weight": 5.25,
                "stone_weight": 0.1,
                "net_gold_weight": 5.15,
                "weight": 5.15,
                "purity": 916,
                "metal_rate": 185.5,
                "gold_value": 955.33,
                "making_charge_type": "per_gram",
                "making_value": 150.0,
                "stone_charges": 25.0,
                "wastage_charges": 20.0,
                "item_discount": 0.0,
                "vat_percent": 5.0,
                "vat_amount": 57.52,
                "line_total": 1207.85
              }
            ],
            "subtotal": 1150.33,
            "discount_amount": 0.0,
            "tax_type": "cgst_sgst",
            "gst_percent": 5.0,
            "cgst_total": 28.76,
            "sgst_total": 28.76,
            "igst_total": 0.0,
            "vat_total": 57.52,
            "grand_total": 1207.85,
            "paid_amount": 0.0,
            "balance_due": 1207.85,
            "notes": "Test invoice for returns testing",
            "jobcard_id": null,
            "created_by": "336cdc1b-081b-44ff-86a3-c953c630585a",
            "is_deleted": false
          },
          {
            "id": "7405dfa6-e5b1-4fc3-b70f-1243da9b3255",
            "invoice_number": "INV-2026-0008",
            "date": "2026-01-28T12:18:07.441000",
            "created_at": "2026-01-28T12:18:07.441000",
            "due_date": null,
            "customer_type": "saved",
            "customer_id": "a8b552ab-efa7-4f5b-a1ae-95064962d367",
            "customer_name": null,
            "customer_phone": null,
            "customer_address": null,
            "customer_gstin": null,
            "walk_in_name": null,
            "walk_in_phone": null,
            "worker_id": null,
            "worker_name": null,
            "invoice_type": "sale",
            "payment_status": "unpaid",
            "status": "finalized",
            "finalized_at": "2026-01-28T12:18:08.272000",
            "finalized_by": "336cdc1b-081b-44ff-86a3-c953c630585a",
            "paid_at": null,
            "items": [
              {
                "id": "ef8c30f5-13f8-45f7-9839-816700815fab",
                "category": "Rings",
                "description": "Gold Ring 18K - Stock Test",
                "qty": 1,
                "gross_weight": 4.5,
                "stone_weight": 0.05,
                "net_gold_weight": 4.45,
                "weight": 4.45,
                "purity": 750,
                "metal_rate": 165.0,
                "gold_value": 734.25,
                "making_charge_type": "flat",
                "making_value": 100.0,
                "stone_charges": 15.0,
                "wastage_charges": 10.0,
                "item_discount": 0.0,
                "vat_percent": 5.0,
                "vat_amount": 42.96,
                "line_total": 902.21
              }
            ],
            "subtotal": 859.25,
            "discount_amount": 0.0,
            "tax_type": "cgst_sgst",
            "gst_percent": 5.0,
            "cgst_total": 21.48,
            "sgst_total": 21.48,
            "igst_total": 0.0,
            "vat_total": 42.96,
            "grand_total": 902.21,
            "paid_amount": 0.0,
            "balance_due": 902.21,
            "notes": "Test invoice for stock movement verification",
            "jobcard_id": null,
            "created_by": "336cdc1b-081b-44ff-86a3-c953c630585a",
            "is_deleted": false
          },
          {
            "id": "f14af47a-2413-4cf2-9880-b2e57d57eb5e",
            "invoice_number": "INV-2026-0007",
            "date": "2026-01-28T12:17:58.121000",
            "created_at": "2026-01-28T12:17:58.121000",
            "due_date": null,
            "customer_type": "saved",
            "customer_id": "a8b552ab-efa7-4f5b-a1ae-95064962d367",
            "customer_name": null,
            "customer_phone": null,
            "customer_address": null,
            "customer_gstin": null,
            "walk_in_name": null,
            "walk_in_phone": null,
            "worker_id": null,
            "worker_name": null,
            "invoice_type": "sale",
            "payment_status": "unpaid",
            "status": "finalized",
            "finalized_at": "2026-01-28T12:17:58.947000",
            "finalized_by": "336cdc1b-081b-44ff-86a3-c953c630585a",
            "paid_at": null,
            "items": [
              {
                "id": "fef234b2-aeec-469d-ab7e-7403b8689498",
                "category": null,
                "description": "Gold Ring 22K",
                "qty": 1,
                "gross_weight": 5.25,
                "stone_weight": 0.1,
                "net_gold_weight": 5.15,
                "weight": 5.15,
                "purity": 916,
                "metal_rate": 185.5,
                "gold_value": 955.33,
                "making_charge_type": "per_gram",
                "making_value": 150.0,
                "stone_charges": 25.0,
                "wastage_charges": 20.0,
                "item_discount": 0.0,
                "vat_percent": 5.0,
                "vat_amount": 57.52,
                "line_total": 1207.85
              }
            ],
            "subtotal": 1150.33,
            "discount_amount": 0.0,
            "tax_type": "cgst_sgst",
            "gst_percent": 5.0,
            "cgst_total": 28.76,
            "sgst_total": 28.76,
            "igst_total": 0.0,
            "vat_total": 57.52,
            "grand_total": 1207.85,
            "paid_amount": 0.0,
            "balance_due": 1207.85,
            "notes": "Test invoice for returns testing",
            "jobcard_id": null,
            "created_by": "336cdc1b-081b-44ff-86a3-c953c630585a",
            "is_deleted": false
          },
          {
            "id": "f72da5c7-3ee3-49f1-bcec-6fe10b609c83",
            "invoice_number": "INV-2026-0006",
            "date": "2026-01-28T12:15:43.443000",
            "created_at": "2026-01-28T12:15:43.443000",
            "due_date": null,
            "customer_type": "saved",
            "customer_id": "a8b552ab-efa7-4f5b-a1ae-95064962d367",
            "customer_name": null,
            "customer_phone": null,
            "customer_address": null,
            "customer_gstin": null,
            "walk_in_name": null,
            "walk_in_phone": null,
            "worker_id": null,
            "worker_name": null,
            "invoice_type": "sale",
            "payment_status": "unpaid",
            "status": "draft",
            "finalized_at": null,
            "finalized_by": null,
            "paid_at": null,
            "items": [
              {
                "id": "bbfa4220-1937-430e-a6c7-71033b51b436",
                "category": "Rings",
                "description": "Gold Ring 18K - Stock Test",
                "qty": 1,
                "gross_weight": 4.5,
                "stone_weight": 0.05,
                "net_gold_weight": 4.45,
                "weight": 4.45,
                "purity": 750,
                "metal_rate": 165.0,
                "gold_value": 734.25,
                "making_charge_type": "flat",
                "making_value": 100.0,
                "stone_charges": 15.0,
                "wastage_charges": 10.0,
                "item_discount": 0.0,
                "vat_percent": 5.0,
                "vat_amount": 42.96,
                "line_total": 902.21
              }
            ],
            "subtotal": 859.25,
            "discount_amount": 0.0,
            "tax_type": "cgst_sgst",
            "gst_percent": 5.0,
            "cgst_total": 21.48,
            "sgst_total": 21.48,
            "igst_total": 0.0,
            "vat_total": 42.96,
            "grand_total": 902.21,
            "paid_amount": 0.0,
            "balance_due": 902.21,
            "notes": "Test invoice for stock movement verification",
            "jobcard_id": null,
            "created_by": "336cdc1b-081b-44ff-86a3-c953c630585a",
            "is_deleted": false
          }
        ]
      },
      "timestamp": "2026-01-28T12:34:39.251191+00:00"
    }
  }
]